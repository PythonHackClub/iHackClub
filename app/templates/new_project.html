{% extends "base.html" %}

{% block body %}

<div class="container">
<legend> Post a New Project </legend>
<small> Not all fields are required but the more information you provide, the easier it will be for potential collaborators to find your project!</small>
	
<form class="form-horizontal" data-toggle="validator" id="newProjectForm" action="/" method="post">
	<div class="panel-group" id="pg" role="tablist" aria-multiselectable="true">
	
	<div class="panel panel-defalut">
		<div class="panel-heading" role="tab" id="headingBasics">
			<h4 class="panel-title">
				<a role="button" data-toggle="collapse" href="#basicInfo" aria-expanded="true" aria-controls="basicInfo">
					<span class="glyphicon glyphicon-triangle-bottom"></span> Basic Project Info
				</a>
			</h4>
		</div>
		
		<div id="basicInfo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingBasics">
			<div class="panel-body" id="basics">
				<div class="form-group required">
					<label for="projName">Project Name </label>
					<input type="text" class="form-control" name="project_name" id="project_name" required="required">
				</div>
				<div class="form-group">
					<label for="description">Short Description of Project</label>
					<textarea class="form-control" rows="3" name="description" id="description" placeholder="Description must be 250 characters or less"></textarea>
				</div>
				<div class="form-group">
					<label for="projectStart">Start Date</label>
					<input type="date" class="form-control" name="project_start" id="project_start">
				</div>
				<div class="form-group">
					<label for="projectEnd">Projected End Date</label>
					<input type="date" class="form-control" name="project_end" id="project_end">
				</div>
				<div class="form-group">
					<h4> Target Industries </h4>
					<p class="help-block">Select all that apply.</p>
					<select multiple class="form-control" id="target_industry" name="target_industry">
						{% for industry in formVars.industries %}
		    				<option value="{{ industry }}">{{ industry }} </option>
						{% endfor %}
					</select>
				</div>
			</div>
		</div>
	</div>
	
	<div class="panel panel-defalut">
		<div class="panel-heading" role="tab" id="headingTeam">
			<h4 class="panel-title">
				<a class="collapsed" role="button" data-toggle="collapse" href="#teamInfo" aria-expanded="false" aria-controls="basicInfo">
					<span class="glyphicon glyphicon-triangle-right"></span>Team & Collaboration Info
				</a>
			</h4>
		</div>
		<div id="teamInfo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTeam">
			<div class="panel-body">
				<div class="form-group">
					<label for="teamSize">Preferred Team Size</label>
					<input type="number" class="form-control" name="team_size" id="team_size">
				</div>
				<div class="form-group">
					<label for="hoursPerWeek">Expected Hours-per-Week Committment</label>
					<input type="number" class="form-control" name="hours_per_week" id="hours_per_week">
				</div>
				
				<div class="checkbox" id="meetup_options">
				<h4> Collaboration Options </h4>
					<p class="help-block">Check all that apply.</p>
					<label>
						<input type="checkbox" name="meetup_options" value="remote">Remote
					</label>
					<label>
						<input type="checkbox" name="meetup_options" value="in-person">In-Person
					</label>
				</div>
				<div class="form-group">
					<h4> Region of Bay Area Where Team Plans to Meet</h4>
					<p class="help-block">Select all that apply.</p>
					<select multiple class="form-control" id="region" name="region">
						{% for region in formVars.regions %}
		    				<option value="{{ region }}">{{ region }} </option>
						{% endfor %}
					</select>
				</div>
			</div>
		</div>
	</div>
		
	<div class="panel panel-defalut">
		<div class="panel-heading" role="tab" id="headingTech">
			<h4 class="panel-title">
				<a class="collapsed" role="button" data-toggle="collapse" href="#techInfo" aria-expanded="false" aria-controls="basicInfo">
					<span class="glyphicon glyphicon-triangle-right"></span>Technology Info
				</a>
			</h4>
		</div>
		<div id="techInfo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTech">
			<div class="panel-body">
				<div class="form-group">
					<h4> Technologies You Plan to Utilize </h4>
					<p class="help-block">Select all that apply.</p>
					<select multiple class="form-control" id="technology" name="technology">
						{% for group in formVars.technologies %}
							{% for key, val in group.iteritems() %}
								<option disabled class="subCategory"> {{ key }} </option>
								{% for tech in val %}
									<option value="{{ tech }}">{{ tech }}</option>
								{% endfor %}
								<br>
							{% endfor %}
						{% endfor %}
					</select>
				</div>
				<div class="form-group">
					<h4> Skills Sought </h4>
					<p class="help-block">Select all that apply.</p>
					<select multiple class="form-control" name="skills_needed" id="skills_needed">
						{% for skill in formVars.skills %}
		    				<option value="{{ skill }}">{{ skill }} </option>
						{% endfor %}
					</select>
				</div>
				<div class="form-group">
					<h4> Target Devices </h4>
					<p class="help-block">Select all that apply.</p>
					<select multiple class="form-control" id="target_devices" name="target_devices">
						{% for device in formVars.devices %}
		    				<option value="{{ device }}">{{ device }} </option>
						{% endfor %}
					</select>
				</div>
			</div>
		</div>
	</div>
	</div>
		<button type="submit" class="btn btn-default">Submit</button>
</form>
</div>



<script>
// this changes the carets when collapse is hidden/shown


$('#pg').on('hide.bs.collapse', function (e) {
  var target = e.target.id;
  var headerId = document.getElementById(target).getAttribute("aria-labelledby");
  var selector = "#" + headerId
  $(selector).find("span").attr("class", "glyphicon glyphicon-triangle-right");

});

$('#pg').on('show.bs.collapse', function (e) {
  var target = e.target.id;
  var headerId = document.getElementById(target).getAttribute("aria-labelledby");
  var selector = "#" + headerId
  $(selector).find("span").attr("class", "glyphicon glyphicon-triangle-bottom");

});



// successfully submits data to route. route successfully parses into dictionary
	$("#newProjectForm").submit(function (evt) {
		evt.preventDefault();

		$.post("/save_project", $( "#newProjectForm" ).serialize(), function (result){
			console.log(result);
		});

	})
</script>

{% endblock %}
